"0",""
"0","library(""haven"")"
"0","library(""ggplot2"")"
"0","library(""dplyr"")"
"0",""
"0","data <- read_dta(""usa_00001.dta"")"
"0",""
"0",""
"0","data <- data %>% filter(inctot <= 9999998)"
"0"," "
"0","#order the data from least to greatest"
"0","data <- data[order(data$inctot), ]"
"0",""
"0","#create a variable for the row numbe "
"0","data$observation_number <- 1:nrow(data)"
"0",""
"0","#find the sum of total income so we can claculate the percentage of the total each person earns"
"0",""
"0","subset <- subset(data, inctot >= 0)"
"0",""
"0","total_inc <- sum(subset$inctot)"
"0",""
"0","#create a new variable to store the percentage contribution of each observation"
"0","subset$inc_percent <- (subset$inctot / total_inc)"
"0",""
"0","#make a variable to hold the cumulative percentage "
"0","subset$cum_inc_percent <- cumsum(subset$inc_percent)"
"0",""
"0","#make a variable that stores the percentage of the total sample each observation makes up:e 1/N where"
"0","subset$pop_percent <- (1/nrow(subset))"
"0",""
"0","subset$cum_pop_percent <- cumsum(subset$pop_percent)"
"0",""
"0","#plot the chart"
"0","plot(subset$cum_pop_percent, subset$cum_inc_percent, type = ""b"", col = ""blue"")"
