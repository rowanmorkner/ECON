"0","# List of variables for which you want to calculate YoY and QoQ changes"
"0",""
"0","library(dplyr)"
"0",""
"0","# List of variables for which you want to calculate YoY and QoQ changes"
"0","variables <- c(""CPIAUCSL"", ""PPICMM"", ""WPSFD49207"", ""WPSFD49502"", "
"0","               ""CUSR0000SAC"", ""CUSR0000SAD"", ""CUSR0000SAS"", ""PCECTPI"", ""M1REAL"", ""M2REAL"", ""INDPRO"")"
"0",""
"0",""
"0","# Identify variables that do not already have YoY and QoQ variables"
"0","existing_yoy_vars <- paste0(variables, ""_yoy"")"
"0","existing_qoq_vars <- paste0(variables, ""_qoq"")"
"0",""
"0","variables_to_process_yoy <- variables[!existing_yoy_vars %in% names(data)]"
"0","variables_to_process_qoq <- variables[!existing_qoq_vars %in% names(data)]"
"0",""
"0",""
"0","# Process YoY variables"
"0","if (length(variables_to_process_yoy) > 0) {"
"0","  data <- data %>%"
"0","    mutate(across("
"0","      all_of(variables_to_process_yoy),"
"0","      ~ (./lag(., 4) - 1) * 100,"
"0","      .names = ""{.col}_yoy"""
"0","    ))"
"0","}"
"0",""
"0","# Process QoQ variables"
"0","if (length(variables_to_process_qoq) > 0) {"
"0","  data <- data %>%"
"0","    mutate(across("
"0","      all_of(variables_to_process_qoq),"
"0","      ~ (./lag(., 1) - 1) * 100,"
"0","      .names = ""{.col}_qoq"""
"0","    ))"
"0","}"
"0",""
"0",""
